<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dao.system.SysUserManageMapper">

    <resultMap type="com.model.SysUser" id="userMap">
        <result column="id" property="id"/>
        <result column="name" property="name"/>
        <result column="username" property="username"/>
        <result column="password" property="password"/>
        <association property="sysRole" javaType="com.model.SysRole">
            <id column="id" property="id"/>
            <!-- 用户组名 -->
            <result column="roleName" property="roleName"/>
        </association>
    </resultMap>


    <!-- 登录 -->
    <select id="login" parameterType="com.model.SysUser" resultMap="userMap">
		select
		f.*
		from
		sys_user f
		where f.username=#{username} and f.password=#{password}

	</select>

    <select id="getAllUsers" parameterType="com.model.SysUser" resultMap="userMap">
		select
			f.id,
			f.name,
			f.username,
			f.password,
			s.id,
			s.roleName
		from sys_user f,sys_role s where f.id=s.id

	</select>


</mapper>